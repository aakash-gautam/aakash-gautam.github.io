<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SIP Portfolio Tracker & Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --blue: #0066ff;
  --navy: #0b2545;
  --light-bg: #f5f8ff;
}
body {
  font-family: "Inter", sans-serif;
  margin: 0;
  background: var(--light-bg);
  color: #222;
}
.dashboard {
  max-width: 1200px;
  margin: 25px auto;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.08);
  overflow: hidden;
}
header {
  background: var(--navy);
  color: #fff;
  padding: 20px 25px;
}
header h1 {
  margin: 0;
  font-size: 1.6rem;
}
.toolbar {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  padding: 15px 25px;
  background: #f0f4ff;
}
.form-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}
input, select, textarea {
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 8px 10px;
  min-width: 120px;
}
button {
  background: var(--blue);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 8px 16px;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { background: #004fcb; }
.tabs {
  display: flex;
  justify-content: center;
  background: #eaf1ff;
  border-bottom: 1px solid #ccc;
}
.tab {
  padding: 10px 20px;
  cursor: pointer;
  font-weight: 500;
  color: #555;
  border-bottom: 3px solid transparent;
}
.tab.active {
  border-color: var(--blue);
  color: var(--blue);
  background: #fff;
}
.content {
  padding: 20px 30px;
  display: none;
}
.content.active { display: block; }
.cards {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}
.card {
  flex: 1;
  min-width: 200px;
  background: #f9fbff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 15px;
}
.card h3 {
  margin: 5px 0;
  color: var(--blue);
}
.sip-list {
  margin-top: 20px;
}
.sip-item {
  border: 1px solid #dfe6ff;
  background: #f8faff;
  border-radius: 8px;
  margin-bottom: 10px;
  padding: 10px 15px;
}
.sip-item input {
  width: 100px;
}
.sip-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.sip-header h4 {
  margin: 0;
  color: var(--navy);
}
.edit-btn {
  background: #00b894;
  padding: 5px 10px;
  font-size: 0.9rem;
}
.charts {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 30px;
  margin-top: 30px;
}
.chart-box {
  flex: 1;
  min-width: 350px;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 8px;
  padding: 15px;
}
.breakdown-tabs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 20px;
}
.breakdown-tab {
  padding: 8px 16px;
  border-radius: 20px;
  background: #e0e9ff;
  cursor: pointer;
  color: #333;
}
.breakdown-tab.active {
  background: var(--blue);
  color: #fff;
}
.breakdown-content {
  margin-top: 20px;
  display: none;
}
.breakdown-content.active { display: block; }
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  text-align: center;
  border: 1px solid #ddd;
  padding: 6px;
}
th { background: #f0f5ff; }
</style>
</head>
<body>
<div class="dashboard">
  <header>
    <h1>ðŸ“Š Consolidated SIP Portfolio Tracker & Calculator</h1>
  </header>

  <div class="toolbar">
    <div class="form-group">
      <label>Duration (Years):</label>
      <select id="globalYears">
        <option value="5">5</option><option value="10">10</option>
        <option value="15">15</option><option value="20">20</option>
        <option value="25">25</option><option value="30">30</option>
        <option value="35">35</option><option value="40">40</option>
      </select>
    </div>
    <form id="sipForm" class="form-group">
      <input type="text" id="sipName" placeholder="SIP Name" required />
      <input type="number" id="sipAmount" placeholder="Monthly â‚¹" required />
      <input type="number" id="sipRate" placeholder="Annual Return %" required />
      <input type="number" id="sipStepup" placeholder="Step-up %" value="0" />
      <button type="submit">Add SIP</button>
    </form>
  </div>

  <div class="tabs">
    <div class="tab active" id="tabPortfolio">Portfolio</div>
    <div class="tab" id="tabBreakdown">Breakdowns</div>
  </div>

  <div id="portfolio" class="content active">
    <div class="cards" id="portfolioSummary"></div>
    <div class="charts">
      <div class="chart-box">
        <h3>Investment vs Returns</h3>
        <canvas id="donutChart"></canvas>
      </div>
      <div class="chart-box">
        <h3>Portfolio Growth Over Time</h3>
        <canvas id="growthChart"></canvas>
      </div>
    </div>

    <div class="sip-list" id="sipList"></div>
  </div>

  <div id="breakdowns" class="content">
    <div class="breakdown-tabs">
      <div class="breakdown-tab active" id="yearTab">Yearly</div>
      <div class="breakdown-tab" id="monthTab">Monthly</div>
    </div>
    <div id="yearlyBreakdown" class="breakdown-content active"></div>
    <div id="monthlyBreakdown" class="breakdown-content"></div>
  </div>
</div>

<script>
let sips = [];
let donutChart, growthChart;

const sipForm = document.getElementById('sipForm');
const sipList = document.getElementById('sipList');
const portfolioSummary = document.getElementById('portfolioSummary');
const globalYears = document.getElementById('globalYears');

sipForm.addEventListener('submit', e => {
  e.preventDefault();
  sips.push({
    name: sipName.value.trim(),
    amount: +sipAmount.value,
    rate: +sipRate.value,
    stepup: +sipStepup.value
  });
  sipForm.reset();
  sipStepup.value = 0;
  render();
});

function render() {
  const years = +globalYears.value;
  sipList.innerHTML = '';
  let totalInvested = 0, totalValue = 0;

  sips.forEach((sip, i) => {
    const invested = sip.amount * 12 * years;
    const value = calcFV(sip.amount, sip.rate, years, sip.stepup);
    totalInvested += invested;
    totalValue += value;

    const sipDiv = document.createElement('div');
    sipDiv.className = 'sip-item';
    sipDiv.innerHTML = `
      <div class="sip-header">
        <h4>${sip.name}</h4>
        <button class="edit-btn" onclick="editSIP(${i})">Edit</button>
      </div>
      <p><strong>Monthly:</strong> â‚¹${sip.amount} | <strong>Rate:</strong> ${sip.rate}% | <strong>Step-up:</strong> ${sip.stepup}%</p>
      <p><strong>Invested:</strong> â‚¹${invested.toLocaleString()} | <strong>Value:</strong> â‚¹${value.toLocaleString()}</p>
    `;
    sipList.appendChild(sipDiv);
  });

  const returns = totalValue - totalInvested;
  portfolioSummary.innerHTML = `
    <div class="card"><h3>Invested</h3><p>â‚¹${totalInvested.toLocaleString()}</p></div>
    <div class="card"><h3>Est. Returns</h3><p>â‚¹${returns.toLocaleString()}</p></div>
    <div class="card"><h3>Total Value</h3><p>â‚¹${totalValue.toLocaleString()}</p></div>
  `;

  drawDonut(totalInvested, returns);
  drawGrowthChart(totalInvested, totalValue, years);
  renderBreakdowns(years);
}

function editSIP(i) {
  const s = sips[i];
  sipName.value = s.name;
  sipAmount.value = s.amount;
  sipRate.value = s.rate;
  sipStepup.value = s.stepup;
  sips.splice(i,1);
  render();
}

function calcFV(monthly, rate, years, stepup=0) {
  const months = years * 12;
  let fv = 0, cur = monthly;
  const r = rate/12/100;
  for(let m=1;m<=months;m++){
    fv = (fv + cur)*(1+r);
    if(m%12===0) cur *= (1+stepup/100);
  }
  return Math.round(fv);
}

function drawDonut(invested, returns) {
  const ctx = document.getElementById('donutChart').getContext('2d');
  if (donutChart) donutChart.destroy();
  donutChart = new Chart(ctx,{
    type:'doughnut',
    data:{
      labels:['Invested','Returns'],
      datasets:[{data:[invested,returns], backgroundColor:['#cce0ff', '#0066ff']}]
    },
    options:{plugins:{legend:{position:'bottom'}}}
  });
}

function drawGrowthChart(invested, totalValue, years) {
  const ctx = document.getElementById('growthChart').getContext('2d');
  if (growthChart) growthChart.destroy();
  const dataX=[], investedY=[], valueY=[];
  for(let y=1;y<=years;y++){
    dataX.push('Y'+y);
    let inv = sips.reduce((sum,s)=>sum+s.amount*12*y,0);
    let val = sips.reduce((sum,s)=>sum+calcFV(s.amount,s.rate,y,s.stepup),0);
    investedY.push(inv);
    valueY.push(val);
  }
  growthChart = new Chart(ctx,{
    type:'line',
    data:{
      labels:dataX,
      datasets:[
        {label:'Invested',data:investedY,borderColor:'#89aaff',backgroundColor:'#cce0ff',fill:true},
        {label:'Value',data:valueY,borderColor:'#0066ff',backgroundColor:'#0066ff22',fill:true}
      ]
    },
    options:{responsive:true,plugins:{legend:{position:'bottom'}}}
  });
}

function renderBreakdowns(years){
  const yearly=document.getElementById('yearlyBreakdown');
  const monthly=document.getElementById('monthlyBreakdown');
  yearly.innerHTML=''; monthly.innerHTML='';
  let yearTable='<table><tr><th>Year</th><th>Total Invested (â‚¹)</th><th>Value (â‚¹)</th></tr>';
  for(let y=1;y<=years;y++){
    let inv=sips.reduce((sum,s)=>sum+s.amount*12*y,0);
    let val=sips.reduce((sum,s)=>sum+calcFV(s.amount,s.rate,y,s.stepup),0);
    yearTable+=`<tr><td>${y}</td><td>${inv.toLocaleString()}</td><td>${val.toLocaleString()}</td></tr>`;
  }
  yearTable+='</table>';
  yearly.innerHTML=yearTable;

  let monthTable='<table><tr><th>Month</th><th>Total Value (â‚¹)</th></tr>';
  const months=years*12;
  for(let m=1;m<=months;m+=12){
    let val=sips.reduce((sum,s)=>sum+calcFV(s.amount,s.rate,m/12,s.stepup),0);
    monthTable+=`<tr><td>Month ${m}</td><td>${val.toLocaleString()}</td></tr>`;
  }
  monthTable+='</table>';
  monthly.innerHTML=monthTable;
}

// Tabs
document.querySelectorAll('.tab').forEach((tab,i)=>{
  tab.addEventListener('click',()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.querySelectorAll('.content')[i].classList.add('active');
  });
});

// Breakdown tab toggle
document.getElementById('yearTab').addEventListener('click',()=>{
  document.getElementById('yearTab').classList.add('active');
  document.getElementById('monthTab').classList.remove('active');
  document.getElementById('yearlyBreakdown').classList.add('active');
  document.getElementById('monthlyBreakdown').classList.remove('active');
});
document.getElementById('monthTab').addEventListener('click',()=>{
  document.getElementById('monthTab').classList.add('active');
  document.getElementById('yearTab').classList.remove('active');
  document.getElementById('monthlyBreakdown').classList.add('active');
  document.getElementById('yearlyBreakdown').classList.remove('active');
});

globalYears.addEventListener('change',render);
</script>
</body>
</html>
